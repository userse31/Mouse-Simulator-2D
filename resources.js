/*
Utilizes GNU GENERAL PUBLIC LICENSE 3. See "LICENSE" file for details 
This program is free software! This means you may redistribute and/or modify this program under the terms of the GNU General Public License. Why you would want to redistribute/modify my horrible coding, who knows! But you can!!!
The GNU General Public License is published by the "Free Software Foundation, Inc" at 675 Mass Ave, Cambridge MA 02139, USA
*/

//preinitialized data
var cur_page=0;
var paused=0;
var last_dir="";
var player={brain:{gender:0.0, dysphoria:1, mode:1}, name:"Alex", x:1, y:1, health:20, strength:1, inv:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],0], creative:0, tainted:0, days:0, noclip:0,seed:0,};
//inventory: [(item id),(item amount)]; player.inv[10]=selected pointer
//maps
var pages=[{
	//home_page
	map:[
	[1,6,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,10,0,10,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,10,11,10,1],//craft bench
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,10,0,10,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,13,0,0,0,0,0,0,7,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,0,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
	],
	entities:[
        {id:2, char:9, x:4, y:10, item: [1,10]},//branch
        {id:2, char:12, x:5, y:10, item: [2,10]},//hay
        {id:2, char:27, x:5, y:11, item: [12,10]},//stew
	],
	holes:[
		//holes
		{x:1, y:0, dest_page:[0,0,0], next_x: 19, next_y: 12},//gen new page
		//{x:2, y:0, dest_page:[null,null,1], next_x: 19, next_y: 12},//gen new slip page
		//dest_page:[page_x,page_y,page_layer]
	],
	metadata:{
	safety:1,//Do enemies spawn here at night?
	north_goto:false,//Can leave north edge
	south_goto:false,//Can leave south edge
	west_goto:false,//Can leave west edge
	east_goto:false,//Can leave north edge
	x:0,
	y:0,
	layer:-1,
	//underground:true,
	}
},
];

//the font/sprites
const font=[
//0, solid white
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,255,255,255
],
//1, solid black
[
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,0,0,0,255,255,255
],
//2, dither
[
0,1,0,1,0,1,0,1,
1,0,1,0,1,0,1,0,
0,1,0,1,0,1,0,1,
1,0,1,0,1,0,1,0,
0,1,0,1,0,1,0,1,
1,0,1,0,1,0,1,0,
0,1,0,1,0,1,0,1,
1,0,1,0,1,0,1,0,255,255,255,0,0,0
],
//3, Deer mouse/player
[
0,1,1,1,1,1,1,0,
1,1,1,1,1,1,1,1,
1,1,0,1,1,0,1,1,
1,1,1,1,1,1,1,1,
1,1,0,0,0,0,1,1,
1,1,1,0,0,1,1,1,
1,1,1,1,1,1,1,1,
0,1,1,1,1,1,1,0,185,122,87,255,255,255
],
//4	Enemy?
[
0,1,1,1,1,1,1,0,
1,1,1,1,1,1,1,1,
1,1,0,1,1,0,1,1,
1,1,1,1,1,1,1,1,
1,1,1,0,0,1,1,1,
1,1,0,0,0,0,1,1,
1,1,1,1,1,1,1,1,
0,1,1,1,1,1,1,0,185,122,87,255,255,255
],
//5, solid black, not invul
[
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,0,0,0,255,255,255
],
//6, hole	
[
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,0,0,1,1,1,
1,1,0,0,0,0,1,1,
1,1,0,0,0,0,1,1,
1,1,1,0,0,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,0,0,0,128,128,255
],
//7, bedding
[
1,0,1,0,1,0,1,0,
1,0,1,0,1,0,1,0,
0,1,0,1,0,1,0,1,
0,1,0,1,0,1,0,1,
1,0,1,0,1,0,1,0,
1,0,1,0,1,0,1,0,
0,1,0,1,0,1,0,1,
0,1,0,1,0,1,0,1,244,164,96,255,255,255
],
//8, border
[
1,1,1,1,1,1,1,1,
1,0,1,0,0,1,0,1,
1,1,0,0,1,0,0,1,
1,0,0,1,0,0,1,1,
1,0,1,0,0,1,0,1,
1,1,0,0,1,0,0,1,
1,0,0,1,0,0,1,1,
1,1,1,1,1,1,1,1,0,255,255,255,255,255
],
//9, Branch
[
0,0,0,0,0,0,0,0,
0,0,0,0,1,0,0,0,
0,0,1,0,1,0,1,0,
0,0,0,1,0,0,1,0,
0,0,0,0,1,1,0,0,
0,0,0,0,1,1,0,0,
0,0,1,1,0,0,1,0,
0,0,0,0,0,0,0,1,244,164,96,255,255,255
],
//10, craft_space
[
1,1,1,1,1,1,1,1,
1,0,0,0,0,0,0,1,
1,0,0,0,0,0,0,1,
1,0,0,0,0,0,0,1,
1,0,0,0,0,0,0,1,
1,0,0,0,0,0,0,1,
1,0,0,0,0,0,0,1,
1,1,1,1,1,1,1,1,0,0,0,255,255,255
],
//11, craft_arrow
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,1,0,0,
0,0,0,0,0,0,1,0,
0,1,1,1,1,1,1,1,
0,1,1,1,1,1,1,1,
0,0,0,0,0,0,1,0,
0,0,0,0,0,1,0,0,
0,0,0,0,0,0,0,0,0,0,0,255,255,255
],
//12, hay
[
0,0,0,1,1,0,0,0,
0,0,1,0,1,1,0,0,
0,1,0,1,0,1,1,0,
1,0,1,0,1,0,1,1,
1,1,0,1,0,1,0,1,
0,1,1,0,1,0,1,0,
0,0,1,0,0,1,0,0,
0,0,0,1,1,0,0,0,244,164,96,255,255,255
],
//13, Grass
[
0,1,0,1,0,1,0,1,
1,0,0,1,0,1,0,1,
1,0,0,1,0,0,1,0,
1,0,0,1,0,0,1,0,
0,1,1,0,0,1,0,1,
0,1,1,0,0,1,0,1,
1,0,0,1,0,1,0,1,
1,1,1,1,1,1,1,1,0,255,0,255,255,255
],
//14, Tree leaves
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,1,1,1,1,0,0,
0,1,1,1,1,1,1,0,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
0,1,1,1,1,1,1,0,0,255,0,255,255,255
],
//15, Tree trunk
[
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,1,1,1,1,0,0,
0,1,1,1,1,1,1,0,185,122,87,255,255,255
],
//16, brown mushroom
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,1,1,0,0,0,
0,0,1,1,1,1,0,0,
0,1,1,1,1,1,1,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,179,170,154,255,255,255
],
//17, red mushroom
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,1,1,0,0,0,
0,0,1,1,1,1,0,0,
0,1,1,1,1,1,1,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,255,0,0,255,255,255
],
//18, Fence
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
1,0,0,0,0,0,0,1,
1,0,0,0,0,0,0,1,
1,1,1,1,1,1,1,1,
1,0,0,0,0,0,0,1,
1,1,1,1,1,1,1,1,
1,0,0,0,0,0,0,1,185,122,87,255,255,255
],
//19, attack indicator/projectile
[
0,0,0,1,1,0,0,0,
0,1,0,1,1,0,1,0,
0,0,1,1,1,1,0,0,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
0,0,1,1,1,1,0,0,
0,1,0,1,1,0,1,0,
0,0,0,1,1,0,0,0,255,0,0,255,255,255
],
//20, raygun ring
[
0,0,0,0,0,0,0,0,
0,0,0,1,1,0,0,0,
0,0,1,0,0,1,0,0,
0,1,0,0,0,0,1,0,
0,1,0,0,0,0,1,0,
0,0,1,0,0,1,0,0,
0,0,0,1,1,0,0,0,
0,0,0,0,0,0,0,0,0,255,0,255,255,255
],
//21, stick
[
0,0,0,0,0,0,0,0,
0,1,1,0,0,0,0,0,
0,1,1,1,0,0,0,0,
0,0,1,1,1,0,0,0,
0,0,0,1,1,1,0,0,
0,0,0,0,1,1,1,0,
0,0,0,0,0,1,1,0,
0,0,0,0,0,0,0,0,185,122,87,255,255,255
],
//22, String
[
0,0,0,0,0,0,0,0,
0,0,0,1,1,0,0,0,
0,0,1,0,0,1,0,0,
0,1,0,0,0,0,0,0,
0,0,1,1,1,0,0,0,
0,0,0,0,0,1,0,0,
0,0,0,0,0,1,1,0,
0,0,0,0,0,0,0,0,0,0,0,255,255,255
],
//23, Clock Radio
[
0,0,0,0,0,0,0,0,
0,0,1,1,1,1,0,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,0,0,0,0,0,0,0,
0,1,1,0,0,1,1,0,
0,1,1,0,0,1,1,0,
0,0,0,0,0,0,0,0,100,100,100,200,137,102
],
//24, Sapling.
[
0,1,0,0,1,0,1,0,
0,1,0,0,1,0,1,0,
0,0,1,1,1,1,0,0,
1,0,0,1,1,0,0,1,
0,1,1,1,1,1,1,0,
0,0,1,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,0,255,0,255,255,255
],
//25, Leaves
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,1,1,1,0,0,0,
0,0,1,1,1,1,0,0,
0,0,1,1,1,1,0,0,
0,0,0,1,1,1,0,0,
0,0,0,0,0,0,1,0,
0,0,0,0,0,0,0,0,0,255,0,255,255,255
],
//26, Bowl
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,1,0,0,0,0,1,0,
0,1,0,0,0,0,1,0,
0,0,1,0,0,1,0,0,
0,0,0,1,1,0,0,0,0,0,0,255,255,255
],
//27, Mushroom Stew
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,0,1,1,1,1,0,0,
0,0,0,1,1,0,0,0,0,0,0,255,255,255
],
//28, Carpet
[
1,0,1,0,1,0,1,0,
0,1,0,1,0,1,0,1,
1,0,1,0,1,0,1,0,
0,1,0,1,0,1,0,1,
1,0,1,0,1,0,1,0,
0,1,0,1,0,1,0,1,
1,0,1,0,1,0,1,0,
0,1,0,1,0,1,0,1,193,113,45,255,255,255
],
//29, water
[
1,1,0,0,1,1,1,1,
0,0,1,1,0,0,0,0,
1,1,0,0,1,1,1,1,
0,0,1,1,0,0,0,0,
1,1,0,0,1,1,1,1,
0,0,1,1,0,0,0,0,
1,1,0,0,1,1,1,1,
0,0,1,1,0,0,0,0,0,0,200,0,0,150
],
//30, fire 0
[
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,1,1,1,1,0,0,
0,0,1,1,1,1,0,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,0,1,1,1,1,0,0,
0,0,0,1,1,0,0,0,200,0,0,255,255,255
],
//31, fire 1
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,1,1,1,1,0,0,
0,0,1,1,1,1,0,0,
0,0,1,1,1,1,0,0,
0,0,0,1,1,0,0,0,200,0,0,255,255,255
],
//32, fire 2
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,1,1,1,1,0,0,
0,0,1,1,1,1,0,0,200,0,0,255,255,255
],
//33, bow
[
0,0,0,0,0,0,0,0,
0,0,0,1,1,1,0,0,
0,0,1,0,1,0,0,0,
0,1,0,1,0,0,0,0,
0,1,1,0,0,0,0,0,
0,1,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,255,255,255
],
//34, bow and spindle
[
0,0,0,0,0,0,0,0,
0,0,0,1,1,1,0,0,
0,0,1,0,1,0,0,0,
0,1,0,1,0,0,1,0,
0,1,1,0,0,1,0,0,
0,1,0,0,1,0,0,0,
0,0,0,1,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,255,255,255
],
//35, Amber
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,1,1,1,0,0,
0,0,1,1,1,1,0,0,
0,0,1,1,1,1,0,0,
0,0,1,1,1,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,200,0,0,255,255,255
],
//36, Random tick
[
0,0,1,1,1,1,0,0,
0,1,0,0,0,0,1,0,
1,0,0,1,0,0,0,1,
1,0,0,1,0,0,0,1,
1,0,0,1,1,1,0,1,
1,0,0,0,0,0,0,1,
0,1,0,0,0,0,1,0,
0,0,1,1,1,1,0,0,0,0,0,255,255,255
],
//37, spear
[
0,0,0,0,0,0,0,0,
0,0,0,0,1,1,1,0,
0,0,0,0,0,1,1,0,
0,0,0,0,1,0,1,0,
0,0,0,1,0,0,0,0,
0,0,1,0,0,0,0,0,
0,1,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,185,122,87,255,255,255
],
//38, Raygun
[
0,0,0,0,0,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,1,1,1,1,0,0,
0,0,1,1,1,1,0,0,
0,0,1,1,1,1,0,0,
0,0,0,0,0,0,0,0,255,0,0,255,255,255
],
//39, Arrow
[
0,0,0,0,0,0,0,0,
0,1,1,1,0,0,0,0,
0,1,1,0,0,0,0,0,
0,1,0,1,0,0,0,0,
0,0,0,0,1,0,0,0,
0,0,0,0,0,1,0,0,
0,0,0,0,0,0,1,1,
0,0,0,0,0,0,1,0,255,0,0,255,255,255
],
//40, Cyan Thing
[
0,0,0,0,0,0,1,0,
0,1,0,0,0,0,1,0,
0,0,0,1,1,0,0,0,
0,0,0,1,0,0,0,0,
0,1,0,0,0,0,0,0,
1,1,1,0,1,1,0,0,
0,1,0,0,1,1,0,0,
0,0,0,0,0,0,0,0,0,255,255,120,120,120
],
//41, stone
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,1,1,1,0,0,
0,0,1,1,1,1,0,0,
0,0,1,1,1,1,0,0,
0,0,1,1,1,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,120,120,120,255,255,255
],
//42, Door closed
[
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,185,122,87,255,255,255
],
//43, Door open
[
0,1,1,1,1,1,1,0,
0,1,0,0,0,0,1,0,
0,1,0,0,0,0,1,0,
0,1,0,0,0,0,1,0,
0,1,0,0,0,0,1,0,
0,1,0,0,0,0,1,0,
0,1,0,0,0,0,1,0,
0,1,0,0,0,0,1,0,185,122,87,255,255,255
],
//44, npc hole
[
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,0,0,1,1,1,
1,1,0,0,0,0,1,1,
1,1,0,0,0,0,1,1,
1,1,1,0,0,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,0,0,0,255,255,255
],
//45, Walnut trunk
[
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,1,1,1,1,0,0,
0,1,1,1,1,1,1,0,165,102,67,255,255,255
],
//46, Walnut leaves 1 (middle)
[
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,0,215,0,255,255,255
],
//47, Walnut leaves 2 (left)
[
0,0,1,1,1,1,1,1,
0,0,1,1,1,1,1,1,
0,0,1,1,1,1,1,1,
0,0,1,1,1,1,1,1,
0,0,1,1,1,1,1,1,
0,0,1,1,1,1,1,1,
0,0,1,1,1,1,1,1,
0,0,0,1,1,1,1,1,0,215,0,255,255,255
],
//48, Walnut leaves 3 (right)
[
1,1,1,1,1,1,0,0,
1,1,1,1,1,1,0,0,
1,1,1,1,1,1,0,0,
1,1,1,1,1,1,0,0,
1,1,1,1,1,1,0,0,
1,1,1,1,1,1,0,0,
1,1,1,1,1,1,0,0,
1,1,1,1,1,0,0,0,0,215,0,255,255,255
],
//49, Walnut leaves 4 (top)
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,0,215,0,255,255,255
],
//50, Walnut leaves 5 (top left)
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,1,1,1,1,1,
0,0,1,1,1,1,1,1,
0,0,1,1,1,1,1,1,
0,0,1,1,1,1,1,1,
0,0,1,1,1,1,1,1,0,215,0,255,255,255
],
//51, Walnut leaves 6 (top right)
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
1,1,1,1,1,0,0,0,
1,1,1,1,1,1,0,0,
1,1,1,1,1,1,0,0,
1,1,1,1,1,1,0,0,
1,1,1,1,1,1,0,0,0,215,0,255,255,255
],
//52, walnut fruit
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,1,1,0,0,0,
0,0,1,1,1,1,0,0,
0,0,1,1,1,1,0,0,
0,0,0,1,1,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,160,0,255,255,255
],
//53, walnut stone
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,1,1,0,0,0,
0,0,1,1,1,1,0,0,
0,0,1,1,1,1,0,0,
0,0,0,1,1,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,165,102,67,255,255,255
],
//54, walnut peels
[
0,0,0,0,0,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,0,0,1,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,1,0,
0,1,0,0,0,0,1,0,
0,0,1,1,0,0,0,0,
0,0,0,0,0,0,0,0,0,160,0,255,255,255
],
//55, Bone meal
[
0,0,0,0,0,0,0,0,
0,1,0,1,0,0,0,0,
0,0,0,0,1,0,0,0,
0,0,0,1,0,1,1,0,
0,0,0,1,0,0,1,0,
0,1,0,0,1,0,1,0,
0,0,1,1,1,0,0,0,
0,0,0,0,0,0,0,0,160,160,160,255,255,255
],
//56, Fibers
[
0,0,0,0,0,0,0,0,
0,1,0,0,1,0,1,0,
0,1,0,0,1,0,1,0,
0,0,1,0,1,0,1,0,
0,0,1,0,0,1,0,0,
1,0,1,1,0,1,0,0,
1,0,0,1,0,1,0,0,
0,0,0,0,0,0,0,0,0,160,0,255,255,255
],
//57, book
[
0,0,0,0,0,0,0,0,
0,0,0,0,1,0,0,0,
0,0,0,1,1,1,0,0,
0,0,1,1,1,1,1,0,
0,1,1,1,1,1,0,0,
0,0,1,1,1,0,0,0,
0,0,0,1,0,0,0,0,
0,0,0,0,0,0,0,0,139,69,19,255,255,255
],
//58, bookshelf
[
1,1,1,1,1,1,1,1,
1,0,1,0,1,0,0,1,
1,0,1,0,1,0,0,1,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
1,0,1,0,0,1,0,1,
1,0,1,0,0,1,0,1,
1,1,1,1,1,1,1,1,165,102,67,255,255,255
],
//59, Paper
[
0,0,0,0,0,0,0,0,
0,0,0,0,1,0,0,0,
0,0,0,1,1,1,0,0,
0,0,1,1,1,1,1,0,
0,1,1,1,1,1,0,0,
0,0,1,1,1,0,0,0,
0,0,0,1,0,0,0,0,
0,0,0,0,0,0,0,0,160,160,160,255,255,255
],
//60, Iron
[
0,0,0,0,0,0,0,0,
0,0,0,0,1,0,0,0,
0,0,0,1,1,1,0,0,
0,0,1,1,1,1,1,0,
0,1,1,1,1,1,0,0,
0,0,1,1,1,0,0,0,
0,0,0,1,0,0,0,0,
0,0,0,0,0,0,0,0,211,211,211,255,255,255
],
//61, Meat
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,1,1,0,
0,0,0,0,1,1,1,1,
0,0,0,0,1,1,1,1,
0,0,1,1,1,1,1,1,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,0,0,
0,0,1,1,1,0,0,0,249,144,111,255,255,255
],
//62, Copper
[
0,0,0,0,0,0,0,0,
0,0,0,0,1,0,0,0,
0,0,0,1,1,1,0,0,
0,0,1,1,1,1,1,0,
0,1,1,1,1,1,0,0,
0,0,1,1,1,0,0,0,
0,0,0,1,0,0,0,0,
0,0,0,0,0,0,0,0,184,115,51,255,255,255
],
//63, Cooked Meat
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,1,1,0,
0,0,0,0,1,1,1,1,
0,0,0,0,1,1,1,1,
0,0,1,1,1,1,1,1,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,0,0,
0,0,1,1,1,0,0,0,76,32,5,255,255,255
],
//64, Iron Wall
[
0,0,0,0,0,0,0,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,0,0,0,0,0,0,0,211,211,211,160,160,160
],
//65, Copper Wall
[
0,0,0,0,0,0,0,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,0,0,0,0,0,0,0,184,115,51,169,100,26
],
//66, Bowl of Water
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,0,1,1,1,1,0,0,
0,0,0,1,1,0,0,0,0,0,255,255,255,255
],
//67, Suspicious Stew
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,0,1,1,1,1,0,0,
0,0,0,1,1,0,0,0,0,255,255,255,255,255
],
//68, Camp Fire
[
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,1,1,1,1,0,0,
0,0,1,1,1,1,0,0,
0,0,0,0,0,0,0,0,
0,1,1,0,0,1,1,0,
0,0,0,1,1,0,0,0,
0,1,1,0,0,1,1,0,200,0,0,255,255,255
],
//69, Saw Dust
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,1,0,1,0,0,
0,0,1,0,1,0,1,0,
0,1,0,1,0,1,0,0,
0,0,1,0,1,0,1,0,
0,0,0,1,0,1,0,0,185,122,87,255,255,255
],
//70, Composter
[
0,0,0,1,1,0,0,0,
0,0,1,1,1,1,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,0,1,1,1,1,0,0,
0,0,0,1,1,0,0,0,160,160,160,255,255,255
],
//71, mdf puddy
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,1,1,1,0,0,
0,0,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,
0,0,1,1,1,1,0,0,185,122,87,255,255,255
],
//72, mdf
[
1,1,1,1,0,1,1,1,
0,0,0,0,0,0,0,0,
1,1,0,1,1,1,1,1,
0,0,0,0,0,0,0,0,
1,1,1,1,1,0,1,1,
0,0,0,0,0,0,0,0,
1,1,1,0,1,1,1,1,
0,0,0,0,0,0,0,0,185,122,87,200,137,102
],//asdf
//73, Grind Stone
[
0,0,0,0,0,0,0,0,
0,0,0,1,1,1,0,0,
0,0,1,1,1,1,0,0,
0,0,1,1,1,1,0,0,
0,0,1,1,1,0,0,0,
0,0,0,0,0,0,0,0,
0,1,1,1,1,1,1,0,
0,1,1,1,1,1,1,0,120,120,120,255,255,255
],
//74, green stained mdf
[
1,1,1,1,0,1,1,1,
0,0,0,0,0,0,0,0,
1,1,0,1,1,1,1,1,
0,0,0,0,0,0,0,0,
1,1,1,1,1,0,1,1,
0,0,0,0,0,0,0,0,
1,1,1,0,1,1,1,1,
0,0,0,0,0,0,0,0,93,141,46,108,156,61
],
//75, Red stained mdf
[
1,1,1,1,0,1,1,1,
0,0,0,0,0,0,0,0,
1,1,0,1,1,1,1,1,
0,0,0,0,0,0,0,0,
1,1,1,1,1,0,1,1,
0,0,0,0,0,0,0,0,
1,1,1,0,1,1,1,1,
0,0,0,0,0,0,0,0,220,61,44,235,76,59
],
//76, Cyan Stained mdf
[
1,1,1,1,0,1,1,1,
0,0,0,0,0,0,0,0,
1,1,0,1,1,1,1,1,
0,0,0,0,0,0,0,0,
1,1,1,1,1,0,1,1,
0,0,0,0,0,0,0,0,
1,1,1,0,1,1,1,1,
0,0,0,0,0,0,0,0,93,189,171,108,204,186
],
//77, Copper wire up (off)
[
0,0,0,1,1,0,0,0,
0,0,1,1,1,1,0,0,
0,1,0,1,1,0,1,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,184,115,51,255,255,255
],
//78, Copper wire down (off)
[
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,1,0,1,1,0,1,0,
0,0,1,1,1,1,0,0,
0,0,0,1,1,0,0,0,184,115,51,255,255,255
],
//79, Copper wire left (off)
[
0,0,0,0,0,0,0,0,
0,0,1,0,0,0,0,0,
0,1,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
0,1,0,0,0,0,0,0,
0,0,1,0,0,0,0,0,
0,0,0,0,0,0,0,0,184,115,51,255,255,255
],
//80, Copper wire right (off)
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,1,0,0,
0,0,0,0,0,0,1,0,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
0,0,0,0,0,0,1,0,
0,0,0,0,0,1,0,0,
0,0,0,0,0,0,0,0,184,115,51,255,255,255
],
//81, Copper wire up (on)
[
0,0,0,1,1,0,0,0,
0,0,1,1,1,1,0,0,
0,1,0,1,1,0,1,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,184,115,255,255,255,255
],
//82, Copper wire down (on)
[
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,1,0,1,1,0,1,0,
0,0,1,1,1,1,0,0,
0,0,0,1,1,0,0,0,184,115,255,255,255,255
],
//83, Copper wire left (on)
[
0,0,0,0,0,0,0,0,
0,0,1,0,0,0,0,0,
0,1,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
0,1,0,0,0,0,0,0,
0,0,1,0,0,0,0,0,
0,0,0,0,0,0,0,0,184,115,255,255,255,255
],
//84, Copper wire right (on)
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,1,0,0,
0,0,0,0,0,0,1,0,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
0,0,0,0,0,0,1,0,
0,0,0,0,0,1,0,0,
0,0,0,0,0,0,0,0,184,115,255,255,255,255
],
//85, Copper wire (item)
[
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,184,115,51,255,255,255
],
//86, Switch (off)
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,1,0,0,
0,0,0,0,1,0,0,0,
0,0,0,1,0,0,0,0,
1,1,1,0,0,1,1,1,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,255,255,255
],
//87, Switch (on)
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,255,255,255
],
//88, not gate (off)
[
0,0,1,1,1,1,0,0,
0,0,0,1,1,0,0,0,
1,0,0,0,0,0,0,1,
1,1,0,0,0,0,1,1,
1,1,0,0,0,0,1,1,
1,0,0,0,0,0,0,1,
0,0,0,1,1,0,0,0,
0,0,1,1,1,1,0,0,184,115,51,0,255,255
],
//89, not gate (on)
[
0,0,1,1,1,1,0,0,
0,0,0,1,1,0,0,0,
1,0,0,0,0,0,0,1,
1,1,0,0,0,0,1,1,
1,1,0,0,0,0,1,1,
1,0,0,0,0,0,0,1,
0,0,0,1,1,0,0,0,
0,0,1,1,1,1,0,0,184,115,255,0,255,255
],
//90, gate (off)
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,184,115,51,184,115,51
],
//91, gate (on)
[
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,184,115,255,184,115,255
],
//92, Wire Jumper
[
0,0,0,1,1,0,0,0,
0,0,0,0,1,0,0,0,
0,0,1,1,1,1,1,0,
1,1,1,0,1,0,1,1,
1,1,1,0,1,0,1,1,
0,0,0,0,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,184,115,51,255,255,255
],
//93, Pump
[
0,0,0,0,0,1,0,0,
0,0,1,0,0,1,0,0,
0,1,0,1,0,1,0,0,
0,1,0,1,1,1,1,0,
0,1,0,1,1,1,1,0,
0,1,0,1,1,1,1,0,
0,1,0,0,0,0,0,0,
0,1,0,0,0,0,0,0,100,100,100,255,255,255
],
//94, Fan
[
0,0,0,0,0,0,0,0,
0,1,0,0,0,0,1,0,
0,0,1,0,0,1,0,0,
0,0,0,1,1,0,0,0,
0,0,0,1,1,0,0,0,
0,0,1,0,0,1,0,0,
0,1,0,0,0,0,1,0,
0,0,0,0,0,0,0,0,100,100,100,255,255,255
],
//95, Electrodes, off
[
0,0,0,0,0,0,0,0,
0,1,0,0,0,0,1,0,
1,1,1,0,0,1,1,1,
0,1,0,0,0,0,1,0,
0,1,0,0,0,0,1,0,
0,1,0,0,0,0,1,0,
0,1,0,0,0,0,1,0,
0,1,0,0,0,0,1,0,184,115,51,255,255,255
],
//96, Electrodes, on
[
0,0,0,0,0,0,0,0,
0,1,0,0,0,0,1,0,
1,1,1,0,0,1,1,1,
0,1,0,0,0,0,1,0,
0,1,0,0,0,0,1,0,
0,1,0,0,0,0,1,0,
0,1,0,0,0,0,1,0,
0,1,0,0,0,0,1,0,184,115,255,255,255,255
],
//97, napkin, (black-red plaid)
[
0,1,0,1,0,1,0,1,
1,0,1,0,1,0,1,0,
0,1,0,1,0,1,0,1,
1,0,1,0,1,0,1,0,
0,1,0,1,0,1,0,1,
1,0,1,0,1,0,1,0,
0,1,0,1,0,1,0,1,
1,0,1,0,1,0,1,0,255,0,0,0,0,0
],
//98, Vacuum Tube
[
0,1,1,1,1,1,1,0,
1,0,0,0,0,0,0,1,
1,1,1,1,1,0,0,1,
1,0,0,0,0,0,0,1,
1,0,0,1,1,1,1,1,
1,0,0,0,0,0,0,1,
1,0,0,1,1,0,0,1,
0,1,1,1,1,1,1,0,0,0,0,255,255,255
],
//99, thread
[
0,0,0,0,0,0,0,0,
0,0,0,0,1,0,1,0,
0,0,0,0,1,1,0,0,
0,0,0,1,1,1,1,0,
0,1,1,1,1,0,0,0,
0,0,1,1,0,0,0,0,
0,1,0,1,0,0,0,0,
0,0,0,0,0,0,0,0,213,200,181,255,255,255
],
//100, House Carpet
[
1,0,1,0,1,0,1,0,
0,1,0,1,0,1,0,1,
1,0,1,0,1,0,1,0,
0,1,0,1,0,1,0,1,
1,0,1,0,1,0,1,0,
0,1,0,1,0,1,0,1,
1,0,1,0,1,0,1,0,
0,1,0,1,0,1,0,1,244,226,198,255,255,255
],
//101, Glass
[
1,1,1,1,1,1,1,1,
1,0,1,0,0,1,0,1,
1,1,0,0,1,0,0,1,
1,0,0,1,0,0,1,1,
1,0,1,0,0,1,0,1,
1,1,0,0,1,0,0,1,
1,0,0,1,0,0,1,1,
1,1,1,1,1,1,1,1,0,0,0,255,255,255
],
//102, Microwave Cannon
[
0,0,1,1,1,1,0,0,
0,1,0,0,0,0,1,0,
0,0,0,1,1,0,0,0,
0,0,1,0,0,1,0,0,
1,0,0,0,0,0,0,1,
1,0,0,1,1,0,0,1,
0,1,0,1,1,0,1,0,
0,0,1,1,1,1,0,0,0,0,0,255,255,255
],
//103, T gate (off)
[
0,0,0,1,1,0,0,0,
0,0,1,1,1,1,0,0,
0,1,0,0,0,0,1,0,
1,1,0,0,0,0,1,1,
1,1,0,0,0,0,1,1,
0,1,0,0,0,0,1,0,
0,0,1,1,1,1,0,0,
0,0,0,1,1,0,0,0,184,115,51,0,255,255
],
//104, T gate (on)
[
0,0,0,1,1,0,0,0,
0,0,1,1,1,1,0,0,
0,1,0,0,0,0,1,0,
1,1,0,0,0,0,1,1,
1,1,0,0,0,0,1,1,
0,1,0,0,0,0,1,0,
0,0,1,1,1,1,0,0,
0,0,0,1,1,0,0,0,184,115,255,0,255,255
],
//105, Hitscan
[
0,0,0,0,0,0,0,0,
0,0,1,0,0,1,0,0,
0,0,1,0,0,1,0,0,
0,0,1,1,1,1,0,0,
0,0,1,1,1,1,0,0,
0,0,1,0,0,1,0,0,
0,0,1,0,0,1,0,0,
0,0,0,0,0,0,0,0,0,0,0,255,255,255
],
//106, plasma
[
0,0,0,1,1,0,0,0,
0,1,0,1,1,0,1,0,
0,0,1,1,1,1,0,0,
1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,
0,0,1,1,1,1,0,0,
0,1,0,1,1,0,1,0,
0,0,0,1,1,0,0,0,247,181,0,255,255,255
],
];

const properties={
walkable:[0,2,6,7,9,10,11,13,14,15,16,17,24,28,29,30,31,32,38,40,43,44,45,46,47,48,49,50,51,52,54,68,73,77,78,79,80,81,82,83,84,86,87,88,89,92,95,96,100,23,T_T_GATE_ON,T_T_GATE_OFF,T_COMPOSTER],
not_spawnable:[2,28,29,30,31,32,43,68,73,88,89,86,87,77,78,79,80,81,82,83,84,8,23,T_GATE_OFF,T_GATE_ON,T_COMPOSTER],
burnable:[12,13,14,15,18,24,28,42,43,45,46,47,48,49,50,51,72,74,75,76,100,23,T_BEDDING],
bangable:[18,42,43,12,5,93,94,97,72,74,75,76,101],
placeable_breakable:[3,4,5,6,9,13,21,22,24,25,27,31,37,38,41,45,46,47,48,49,68,69,70,71,72,73,74,51,52,78,I_CLOCK_RADIO,I_T_GATE,I_COMPOSTER],
bonemealable:[52,51,50,49,48,47,46,24,17,16,15,13],
creative_noremove:[1,6,10,11,8],
elec_on:[87,81,82,83,84,89,91,96,T_T_GATE_ON],
elec_off:[86,77,78,79,80,88,90,95,T_T_GATE_OFF],
wires:[77,78,79,80,81,82,83,84],
attack_items:[17,18,19,20,79],
};
const item_drops={
enemy:[
{chance:0.1,item_id:I_MEAT,item_min:1,item_max:1},//Meat
{chance:0.05,item_id:I_IRON,item_min:1,item_max:1},//iron
{chance:0.05,item_id:I_COPPER,item_min:1,item_max:1},//copper
{chance:0.01,item_id:I_CYAN_THING,item_min:1,item_max:1},//cyan thing, 115
],
enemy_slip:[
{chance:0.1,item_id:I_NAPKIN,item_min:1,item_max:1},//Napkin
{chance:0.1,item_id:I_THREAD,item_min:1,item_max:1},//Thread
{chance:0.05,item_id:I_GLASS,item_min:1,item_max:10},//Glass
]};
//items
const item_char=[
0,//Nothing,0
9,//Branch,1
12,//Hay,2
13,//Grass,3
16,//Brown Mushroom,4
17,//Red Mushroom,5
18,//Fence,6
21,//stick,7
22,//string,8
24,//Sapling,9
25,//Leaves,10
26,//Bowl,11
27,//Mushroom Stew,12
28,//Carpet,13
33,//Bow,14
34,//Bow and spindle,15
35,//Amber,16
36,//AIR0, 17
37,//Spear,18
38,//Raygun,19
39,//Arrow, 20
40,//cyan thing, 21
42,//Door, 22
41,//Stone, 23
12,//hay bail, 24
52,//walnut fruit, 25
53,//walnut stone, 26
54,//walnut peels, 27
55,//bone meal, 28
56,//Fibers, 29
57,//Book, 30
58,//Bookshelf, 31
59,//Paper, 32
60,//Iron,33
61,//Meat,34
62,//Copper,35
63,//Cooked Meat,36
64,//Iron Wall,37
65,//Copper Wall,38
66,//Bowl of Water,39
67,//Suspicious Stew,40
68,//Camp Fire,41
69,//Saw Dust,42
70,//Composter,43
71,//mdf puddy,44
72,//mdf,45
73,//Grind Stone,46
74,//Green Stained MDF,47
75,//Red Stained MDF,48
76,//Cyan Stained MDF,49
5,//Black Wall,50
7,//bedding,51
100,//House Carpet,52
14,//Tree leaves,53
15,//Tree Trunk,54
29,//Water,55
30,//Fire,56
23,//Clock Radio,57
0,//Air 1,58
44,//NPC Hole,59
45,//Walnut Trunk,60
46,//Walnut Leaves 1,61
47,//Walnut Leaves 2,62
48,//Walnut Leaves 3,63
49,//Walnut Leaves 4,64
50,//Walnut Leaves 5,65
51,//Walnut Leaves 6,66
85,//Copper wire,67
86,//Switch,68
88,//Not gate,69
90,//Gate, 70
92,//Wire Jumper,71
93,//Pump,72
94,//Fan,73
95,//Electrodes,74
97,//Napkin,75
98,//Vacuum Tube,76
99,//Thread,77
101,//Glass,78
102,//Microwave Cannon,79
104,//T Gate,80
];

const item_names=[
"Nothing",
"Branch",
"Hay",
"Grass",
"Brown Mushroom",
"Red Mushroom",
"Fence",
"Stick",
"String",
"Sapling",
"Leaves",
"Bowl",
"Mushroom Stew",
"Carpet",
"Bow",
"Bow and Spindle",
"Amber",
"REMOVED0",
"Spear",
"Raygun",
"Arrow",
"Cyan Thing",
"Door",
"Stone",
"Hay Bail",
"Walnut Fruit",
"Walnut Stone",
"Walnut Peels",
"Bone Meal",
"Fibers",
"Book",
"Bookshelf",
"Paper",
"Iron",
"Meat",
"Copper",
"Cooked Meat",
"Iron Wall",
"Copper Wall",
"Bowl of Water",
"Suspicious Stew",
"Camp Fire",
"Saw Dust",
"Composter",
"MDF Puddy",
"MDF",
"Grind Stone",
"Green Stained MDF",
"Red Stained MDF",
"Cyan Stained MDF",
"Black Wall",
"Bedding",
"House Carpet",
"Tree Leaves",
"Tree Trunk",
"Water",
"Fire",
"Clock Radio",
"Air",
"NPC Hole",
"Walnut Trunk",
"Walnut Leaves 1",
"Walnut Leaves 2",
"Walnut Leaves 3",
"Walnut Leaves 4",
"Walnut Leaves 5",
"Walnut Leaves 6",
"Copper Wire",
"Switch",
"Not Gate",
"Gate",
"Wire Jumper",
"Pump",
"Fan",
"Electrodes",
"Napkin",
"Vacuum Tube",
"Thread",
"Glass",
"Microwave Cannon",
"T Gate"
];
//crafting
const recipies=[
{//sapling to stick+leaves
input_id:[I_SAPLING],
output:[[I_STICK,3],[I_LEAVES,3]]
},
{//branch to stick+leaves
input_id:[I_BRANCH],
output:[[I_STICK,3],[I_LEAVES,3]]
},
{//hay to string
input_id:[I_HAY],
output:[[I_STRING,3]]
},
{//2 sticks + 1 string to fence
input_id:[I_STICK,0,I_STRING,0,I_STICK,0],
output:[[I_FENCE,3]]
},
{//2 sticks + 1 string to fence
input_id:[0,I_STICK,0,I_STRING,0,I_STICK],
output:[[I_FENCE,3]]
},
{//2 string + 1 leaves to bowl
input_id:[I_STRING,0,I_LEAVES,0,I_STRING,0],
output:[[I_BOWL,1]]
},
{//2 string + 1 leaves to bowl
input_id:[0,I_STRING,0,I_LEAVES,0,I_STRING],
output:[[I_BOWL,1]]
},
{//bowl + brown mushroom to mushroom stew
input_id:[0,0,I_BROWN_MUSHROOM,0,I_BOWL,0],
output:[[I_BOWL,1]]
},
{//bowl + brown mushroom to mushroom stew
input_id:[I_BROWN_MUSHROOM,0,I_BOWL,0,0,0],
output:[[I_MUSHROOM_STEW,1]]
},
{//4 grass to hay
input_id:[I_GRASS,I_GRASS,I_GRASS,I_GRASS,0,0],
output:[[I_HAY,1]]
},
{//4 grass to hay
input_id:[0,0,I_GRASS,I_GRASS,I_GRASS,I_GRASS],
output:[[I_HAY,1]]
},
{//4 string + 2 hay to carpet
input_id:[I_STRING,I_STRING,I_HAY,I_HAY,I_STRING,I_STRING],
output:[[I_CARPET,1]]
},
{//bow
input_id:[I_STICK,0,I_STRING,I_STICK,I_STICK,0],
output:[[I_BOW,1]]
},
{//bow
input_id:[0,I_STICK,I_STICK,I_STRING,0,I_STICK],
output:[[I_BOW,1]]
},
{//bow+stick to bow and spindle
input_id:[I_BOW,I_STICK,0,0,0,0],
output:[[I_BOW_AND_SPINDLE,1]]
},
{//bow and spindle+hay to amber and bow and spindle
input_id:[I_BOW_AND_SPINDLE,I_HAY,0,0,0,0],
output:[[I_BOW_AND_SPINDLE,1],[I_AMBER,5]]
},
{//2 sticks+iron to spear.
input_id:[I_IRON,0,I_STICK,0,I_STICK,0],
output:[[I_SPEAR,1]]
},
{//2 sticks+iron to spear.
input_id:[0,I_IRON,0,I_STICK,0,I_STICK],
output:[[I_SPEAR,1]]
},
/*{//Spear+Red Mushroom to Poisonous Spear.
input_id:[I_SPEAR,I_RED_MUSHROOM,0,0,0,0],
output:[[I_POISONOUS_SPEAR,1]]
},*/
{//Iron+Red mushroom+stick+paper to arrow
input_id:[I_IRON,I_RED_MUSHROOM,I_STICK,I_PAPER,0,0],
output:[[I_ARROW,16]]
},
{//6 sticks to door.
input_id:[I_STICK,I_STICK,I_STICK,I_STICK,I_STICK,I_STICK],
output:[[I_DOOR,1]]
},
{//6 hay to hay bail.
input_id:[I_HAY,I_HAY,I_HAY,I_HAY,I_HAY,I_HAY],
output:[[I_HAY_BAIL,1]]
},
{//hay bail to 6 hay.
input_id:[I_HAY_BAIL],
output:[[I_HAY,6]]
},
{//Walnut fruit to walnut stone and peels
input_id:[I_W_FRUIT],
output:[[I_W_STONE,1],[I_W_PEELS,1]]
},
{//Brown mushroom+red mushroom to Bone meal
input_id:[I_BROWN_MUSHROOM,0,I_LEAVES,0,I_RED_MUSHROOM,0],
output:[[I_BONE_MEAL,3]]
},
{//Brown mushroom+red mushroom to Bone meal
input_id:[0,I_BROWN_MUSHROOM,0,I_LEAVES,0,I_RED_MUSHROOM],
output:[[I_BONE_MEAL,3]]
},
{//Brown mushroom+red mushroom to Bone meal
input_id:[I_RED_MUSHROOM,0,I_LEAVES,0,I_BROWN_MUSHROOM,0],
output:[[I_BONE_MEAL,3]]
},
{//Brown mushroom+red mushroom to Bone meal
input_id:[0,I_RED_MUSHROOM,0,I_LEAVES,0,I_BROWN_MUSHROOM],
output:[[I_BONE_MEAL,3]]
},
{//stone+5 leaves to 3 Fibers+stone
input_id:[I_STONE,I_LEAVES,I_LEAVES,I_LEAVES,I_LEAVES,I_LEAVES],
output:[[I_STONE,1],[I_FIBERS,3]]
},
{//6 fibers to paper
input_id:[I_FIBERS,I_FIBERS,I_FIBERS,I_FIBERS,I_FIBERS,I_FIBERS],
output:[[I_PAPER,1]]
},
{//3 Paper+String to book
input_id:[I_STRING,I_PAPER,I_PAPER,I_PAPER,0,0],
output:[[I_BOOK,1]]
},
{//4 MDF+2 Books to Bookshelf
input_id:[I_MDF,I_MDF,I_BOOK,I_BOOK,I_MDF,I_MDF],
output:[[I_BOOKSHELF,1]],
},
{//1 meat+amber to cooked meat.
input_id:[I_MEAT,I_AMBER,0,0,0,0],
output:[[I_COOKED_MEAT,1]],
},
{//6 iron to iron wall
input_id:[I_IRON,I_IRON,I_IRON,I_IRON,I_IRON,I_IRON],
output:[[I_IRON_WALL,1]],
},
{//iron wall to 6 iron
input_id:[I_IRON_WALL],
output:[[I_IRON,6]],
},
{//6 copper to copper wall
input_id:[I_COPPER,I_COPPER,I_COPPER,I_COPPER,I_COPPER,I_COPPER],
output:[[I_COPPER_WALL,1]],
},
{//copper wall to 6 copper
input_id:[I_COPPER_WALL],
output:[[I_COPPER,6]],
},
{//Amber+Bowl of Water+Brown Mushroom+Red Mushroom to Suspicious Stew
input_id:[I_BROWN_MUSHROOM,I_RED_MUSHROOM,I_BOWL_OF_WATER,I_CYAN_THING,I_AMBER,0],
output:[[I_SUS_STEW,1]],
},
{//Amber+Bowl of Water+Brown Mushroom+Red Mushroom to Suspicious Stew
input_id:[I_RED_MUSHROOM,I_BROWN_MUSHROOM,I_BOWL_OF_WATER,I_CYAN_THING,I_AMBER,0],
output:[[I_SUS_STEW,1]],
},
{//Amber+2 Sticks to Camp Fire
input_id:[I_AMBER,I_STICK,I_STICK,0,0,0],
output:[[I_CAMP_FIRE,1]],
},
{//stone+stick to sawdust+stone
input_id:[I_STONE,I_STICK,0,0,0,0],
output:[[I_SAW_DUST,3],[I_STONE,1]]
},
{//stone+fence to sawdust+stone
input_id:[I_STONE,I_FENCE,0,0,0,0],
output:[[I_SAW_DUST,3],[I_STONE,1]]
},
{//stone+bowl to sawdust+stone
input_id:[I_STONE,I_BOWL,0,0,0,0],
output:[[I_SAW_DUST,3],[I_STONE,1]]
},
{//stone+door to sawdust+stone
input_id:[I_STONE,I_DOOR,0,0,0,0],
output:[[I_SAW_DUST,3],[I_STONE,1]]
},
{//Bowl of Water+fibers+sawdust to bowl+mdf puddy
input_id:[I_BOWL_OF_WATER,I_FIBERS,I_SAW_DUST,0,0,0],
output:[[I_BOWL,1],[I_MDF_PUDDY,1]]
},
{//Bowl of Water+fibers+sawdust to bowl+mdf puddy
input_id:[I_BOWL_OF_WATER,I_SAW_DUST,I_FIBERS,0,0,0],
output:[[I_BOWL,1],[I_MDF_PUDDY,1]]
},
{//Stone+iron to Grind Stone
input_id:[I_STONE,0,I_IRON,0,0,0],
output:[[I_GRIND_STONE,1]]
},
{//MDF+walnut peels to Green Stained MDF
input_id:[I_MDF,I_W_PEELS,0,0,0,0],
output:[[I_GREEN_MDF,1]]
},
{//MDF+walnut peels to Red Stained MDF
input_id:[I_MDF,I_RED_MUSHROOM,0,0,0,0],
output:[[I_RED_MDF,1]]
},
{//MDF+Cyan thing to Cyan Stained MDF
input_id:[I_MDF,I_CYAN_THING,0,0,0,0],
output:[[I_CYAN_MDF,1]]
},
{//2 copper to 5 wire
input_id:[I_COPPER,I_COPPER,0,0,0,0],
output:[[I_COPPER_WIRE,5]]
},
{//wire+stick to 1 switch
input_id:[I_COPPER_WIRE,I_STICK,0,0,0,0],
output:[[I_SWITCH,1]]
},
{//wire+stick to 1 switch
input_id:[I_STICK,I_COPPER_WIRE,0,0,0,0],
output:[[I_SWITCH,1]]
},
{//wire+cyan thing to 1 not gate
input_id:[I_COPPER_WIRE,I_CYAN_THING,0,0,0,0],
output:[[I_NOT_GATE,1]]
},
{//wire+cyan thing to 1 not gate
input_id:[I_CYAN_THING,I_COPPER_WIRE,0,0,0,0],
output:[[I_NOT_GATE,1]]
},
{//wire+copper wall to 1 gate
input_id:[I_COPPER_WIRE,I_COPPER_WALL,0,0,0,0],
output:[[I_GATE,1]]
},
{//wire+copper wall to 1 gate
input_id:[I_COPPER_WALL,I_COPPER_WIRE,0,0,0,0],
output:[[I_GATE,1]]
},
{//4wire to 1 wire jumper
input_id:[I_COPPER_WIRE,I_COPPER_WIRE,I_COPPER_WIRE,I_COPPER_WIRE,0,0],
output:[[I_WIRE_JUMPER,1]]
},
{//4 iron+1 stick+1 paper to pump
input_id:[I_IRON,I_IRON,I_STICK,I_PAPER,I_IRON,I_IRON],
output:[[I_PUMP,1]]
},
{//4 iron+1 stick+1 paper to pump
input_id:[I_IRON,I_IRON,I_PAPER,I_STICK,I_IRON,I_IRON],
output:[[I_PUMP,1]]
},
{//2 iron+1 stick to fan
input_id:[I_IRON,0,I_STICK,0,I_IRON,0],
output:[[I_FAN,1]]
},
{//2 iron+1 stick to fan
input_id:[0,I_IRON,0,I_STICK,0,I_IRON],
output:[[I_FAN,1]]
},
{//thread to 32 string
input_id:[I_THREAD],
output:[[I_STRING,32]]
},
{//Napkin+Hay to bedding 51
input_id:[I_NAPKIN,I_HAY,0,0,0,0],
output:[[I_BEDDING,1]]
},
{//wire+glass+iron to Vacuum Tube
input_id:[I_COPPER_WIRE,I_GLASS,I_IRON,0,0,0],
output:[[I_VACUUM_TUBE,1]]
},
{//Vacuum Tube+Wire+Iron Wall+Cyan thing+Fan to Microwave Cannon
input_id:[I_VACUUM_TUBE,I_COPPER_WIRE,I_IRON_WALL,I_CYAN_THING,I_FAN,0],
output:[[I_MICROWAVE_CANNON,1]]
},
{//3 Vacuum Tubes+Iron+Copper Wire+MDF to Clock Radio
input_id:[I_VACUUM_TUBE,I_VACUUM_TUBE,I_VACUUM_TUBE,I_IRON,I_COPPER_WIRE,I_MDF],
output:[[I_CLOCK_RADIO,1]]
},
{//wire+not gate to 1 T gate
input_id:[I_COPPER_WIRE,I_NOT_GATE,0,0,0,0],
output:[[I_T_GATE,1]]
},
{//wire+not gate to 1 T gate
input_id:[I_NOT_GATE,I_COPPER_WIRE,0,0,0,0],
output:[[I_T_GATE,1]]
},
{//Cyan thing+red mdf+copper wall+iron wall to raygun
input_id:[I_CYAN_THING,I_RED_MDF,I_COPPER_WALL,I_IRON_WALL,0,0],
output:[[I_RAYGUN,1]]
},
{//red mushroom+brown mushroom+bonemeal+bowl to composter
input_id:[I_RED_MUSHROOM,I_BROWN_MUSHROOM,I_BONE_MEAL,I_BOWL,0,0],
output:[[I_COMPOSTER,1]]
},
{//red mushroom+brown mushroom+bonemeal+bowl to composter
input_id:[I_BROWN_MUSHROOM,I_RED_MUSHROOM,I_BONE_MEAL,I_BOWL,0,0],
output:[[I_COMPOSTER,1]]
},
];

const struct=[
{weight:0.8,tries:10,sub:[0,1],id:0},//tree
{weight:0.6,tries:1,sub:[2,2],id:9},//walnut tree
{weight:0.8,tries:10,sub:[0,0],id:1},//grass
{weight:0.1,tries:3,sub:[0,0],id:10},//brown mushroom
{weight:0.1,tries:3,sub:[0,0],id:11},//red mushroom
{weight:0.01,tries:1,sub:[1,1],id:2},//115
{weight:0.2,tries:1,sub:[4,4],id:3},//abandoned shed
{weight:-1,tries:2,sub:[0,0],id:4},//hole
{weight:0.1,tries:2,sub:[3,3],id:5},//pond
{weight:0.01,tries:1,sub:[0,0],id:6},//raygun
{weight:0.1,tries:1,sub:[11,5],id:7},//facility
{weight:0.3,tries:1,sub:[2,2],id:8,entity:{offset_x:1,offset_y:1}},//Mouse Nest
];

const structures=[
//tree,0
[[14],[15]],
//grass, 1
[[13]],
//115, 2
[[40]],
//Human_abandoned_shed, 3
[[5,5,5,0,5],[13,28,28,28,5],[5,28,28,28,13],[5,28,28,28,5],[5,2,5,5,5],],
//hole, 4
[[-1,2,-1],[2,6,2],[-1,2,-1]],
//pond,5
[[0,29,29,0],[29,29,29,29],[29,29,29,29],[0,29,29,0],],
//raygun,6
[[38]],
//group 935, 7
[[5,5,5,2,5,5,5,5,5,5,5,5],[5,13,13,30,13,13,13,13,13,13,13,5],[5,13,13,13,13,13,13,13,14,13,13,5],[14,13,13,13,13,13,13,13,15,13,13,5],[5,13,13,13,13,13,13,13,13,13,13,5],[5,5,5,5,13,5,5,5,5,5,5,5],],
//mouse nest (ncp), 8
[[0,7,0],[7,44,7],[0,7,0],],
//walnut tree, 9
[[50,49,51],[47,46,48],[-1,45,-1]],
//brown mushroom, 10
[[16]],
//red mushroom, 11
[[17]],
];

const SLIP_CARPET_DECAY=0.25;
const SLIP_CARPET_TILE=100;

const struct_slip=[
{weight:0.3,tries:6,sub:[1,5],id:0,decay:true,decay_rate:0.75},//broken chair leg
{weight:0.3,tries:2,sub:[4,4],id:1,decay:true,decay_rate:0.75},//broken chair seat
{weight:0.3,tries:2,sub:[4,4],id:2,decay:true,decay_rate:0.75},
{weight:0.3,tries:1,sub:[5,3],id:3,decay:true,decay_rate:0.25},//broken chair head
//shreaded pillow, cushion, mattress, etc...
];
//pages[cur_page].map[player.y][player.x]
const structures_slip=[
[[-1,72],
[-1,72],
[-1,72],
[72,-1],
[72,-1],
[72,-1]],//chair leg

[[72,72,72,72,72],
[72,72,72,72,72],
[72,72,72,72,72],
[72,72,72,72,72]],//chair seat

[[-1,72,-1,72,-1],
[72,-1,72,-1,72],
[72,-1,72,-1,72],
[72,-1,72,-1,72],
[72,-1,72,-1,72],],//chair head

[[28,28,28,28,28,28],
[28,28,28,28,28,28],
[28,28,28,28,28,28],
[28,28,28,28,28,28]],//shreaded pillow, cushion, mattress, etc...
];

function new_save(){
	paused=true;
	player={brain:{gender:0.0, dysphoria:1, mode:1}, name:"Alex", x:1, y:1, health:20, strength:1, inv:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],0], creative:0, tainted:0, days:0, noclip:0,seed:(Math.floor(Math.random()*0xffffffff)),};
	player.name=prompt("Name?","Alex");
	player.name=(player.name=="")?"Alex":player.name;
	player.creative=(confirm("Enable Creative?"))?1:0;
	pages=[{
	//home_page
	map:[
	[1,6,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,10,0,10,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,10,11,10,1],//craft bench
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,10,0,10,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,13,0,0,0,0,0,0,7,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,0,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
	],
	entities:[
        {id:2, char:9, x:4, y:10, item: [1,10]},//branch
        {id:2, char:12, x:5, y:10, item: [2,10]},//hay
        {id:2, char:27, x:5, y:11, item: [12,10]},//stew
	],
	holes:[
		//holes
		{x:1, y:0, dest_page:[0,0,0], next_x: 19, next_y: 12},//gen new page
		//{x:2, y:0, dest_page:[null,null,1], next_x: 19, next_y: 12},//gen new slip page
		//dest_page:[page_x,page_y,page_layer]
	],
	metadata:{
	safety:1,//Do enemies spawn here at night?
	north_goto:false,//Can leave north edge
	south_goto:false,//Can leave south edge
	west_goto:false,//Can leave west edge
	east_goto:false,//Can leave north edge
	x:0,
	y:0,
	layer:-1,
	//underground:true,
	}
},
];
	cur_page=0;
	paused=false;
}

//square inverse law: intensity ‚àù 1/(distance^2)
function square_inverse(x1,y1,x2,y2){
	var distance=Math.sqrt(
	Math.pow((x2-x1),2)+
	Math.pow((y2-y1),2)
	);
	return (distance<=0)?65535:Math.floor((1/(Math.pow(distance,2)))*65535);
}